---
title: React Component
path: '/how-to-react/react-component'
description: 'Learn how to create dynamic UI with React components'
section: 'core'
---

## Create a div containing 'Hello World!' with JavaScript

Without React:

```js
const rootEl = document.getElementById('js-hello-root');
const element = document.createElement('div');
element.className = 'container';
element.textContent = 'Hello World!';

rootEl.innerHTML = '';
rootEl.appendChild(element);
```

<div style="margin: 24px 0;">
  <div id="js-hello-root"></div>
</div>

With React:

```js
const rootEl = document.getElementById('react-hello-root');
const element = React.createElement(
  'div',
  {
    className: 'container',
  },
  'Hello World!'
);

ReactDOM.render(element, rootEl);
```

<div style="margin: 24px 0;">
  <div id="react-hello-root"></div>
</div>

- `React.createElement` is one of the API provided by React. It is defined as:

  ```javascript noWrapper
  React.createElement(type, props, ...children);
  /* 1. type can be a string of html element (like "div", or "span"),
  or a React component (more on this later) */
  /* 2. props is a object that consists of properties on the type */
  /* 3. children is an array of the child of the element */
  ```

- `ReactDOM.render` is the API provided by ReactDOM. It is defined as:

  ```javascript noWrapper
  ReactDOM.render(reactElement, target);
  /* 1. reactElement is the data generated by `React.createElement`. */
  /* 2. target is an actual DOM element that we want to show our HTML,
  which is usually obtained by `document.getElementById`. */
  ```

<aside>

The easiest way to include React in a HTML file is to add the following scripts tag into your HTML:

```html
<script
  crossorigin
  src="https://unpkg.com/react@16/umd/react.development.js"
></script>
<script
  crossorigin
  src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"
></script>
```

Which will expose `React` and `ReactDOM` as global variable.

</aside>

Let's log the content of `element` and see what is it:

```javascript
{
    $$typeof: Symbol(react.element)
    key: null,
    // highlight-start
    props: {
        className: 'container',
        children: 'Hello World!'
    },
    // highlight-end
    ref: null,
    // highlight-next-line
    type: 'div',
    _owner: null,
    _store: {
        validated: false
    }
}
```

Which is actually just a JavaScript object. Note that the `type` and `props` are what we provided to `React.createElement` call.

## Using JSX

By using JSX, we can make it easier to mentally translate the React code with the generated HTML:

```js
const rootEl = document.getElementById('react-jsx-root');
const element = <div className="container">Hello World!</div>;

ReactDOM.render(element, rootEl);
```

<div style="margin: 24px 0;">
  <div id="react-jsx-root"></div>
</div>

JSX is just `React.createElement`, nothing else.

## Problem: Migration of an Existing Application to use React

Now that you know how to render HTML with React, let's do it to a bigger page.

Let's migrate the feed from [BugBook] to our React App.

![The feed of BugBook will be implemented with React](bugbook-feed.png)

## Copy-Paste HTML to React

We will migrate the feed by copy pasting the HTML and then tweak the html slightly to follow React JSX rules:

1. all tags must be matched with closing tag or self-closing.
1. JSX is not totally similar to HTML. For instance, `class` and `for` HTML attributes should be `className` and `htmlFor` respectively. Don't bother with memorize them, React will give you warning when you get it wrong.

<aside>

[Commit of the changes](https://github.com/malcolm-kee/how-to-react/commit/25b29e59c71724579e3ed4a6b13e065626ac8ad1).

</aside>

At this point, you may think, "Hey, I'm just translating HTML into this weird React JSX syntax, what's the big deal then?"

## Translation between Data and View

React is created to solve one problem: the translation between dynamic data and what is displayed in UI as HTML.

Assuming you have a data like below:

```javascript
const data = {
  name: 'Malcolm',
  greeting: 'Hello',
};
```

How are you going to translate each record to a HTML element like below?

```html
<div class="greeting">
  <p><span>Malcolm</span> says: <span>Hello</span></p>
</div>
```

We can do that with React like below:

```js
const data = {
  name: 'Malcolm',
  greeting: 'Hello',
};

const root = document.getElementById('root-3');
const element = (
  <div className="greeting">
    <p>
      <span>{data.name}</span> says: <span>{data.greeting}</span>
    </p>
  </div>
);

ReactDOM.render(element, root);
```

<div style="margin: 24px 0;">
  <div id="root-3"></div>
</div>

- In JSX, we use the curly brace `{}` to indicate it is a JavaScript expression that need to be run instead of hard-coded string. For instance, `{data.name}` will get the the `name` property value of `data` variable.

What if data is dynamic and will be change?

```javascript
data.name = 'Matthew';

// oh no, the greeting panel is outdated!
```

Because React is all JavaScript, we can wrap the previous createElement into a function and call it again:

```js
const data = {
  name: 'Malcolm',
  greeting: 'Hello',
};

function renderApp() {
  const element = (
    <div className="greeting">
      <p>
        <span>{data.name}</span> says: <span>{data.greeting}</span>
      </p>
    </div>
  );
  const root = document.getElementById('root-4');

  ReactDOM.render(element, root);
}

renderApp(); // render with initial data

/* Uncomment the following lines to see the content is changed! */
// data.name = 'Matthew';
// renderApp();
```

<div style="margin: 24px 0;">
  <div id="root-4"></div>
</div>

The great thing about React is, we just need to rerun the function to generate all the React elements (which is just a bunch of JavaScript objects), and React will figure out what is the difference between the previous `ReactDOM.render` and only make the changes related to the difference.

The whole approach of React is use `React.createElement` to generate a data structure to represents the DOM, which is known as virtual DOM, and then use `ReactDOM.render` to translate this virtual DOM to actual DOM operations, such as `appendChild`, `setAttribute` etc.

<aside>

### Virtual DOM

Because changing HTML directly is relatively slow compared to changing JavaScript variable (one could cause repainting while the other just memory value change), a solution to minimize the change to HTML is to represent it with a data structure in memory and use that data structure to determine the required change before actually applying the change to DOM.

Virtual DOM is that data structure that represents the DOM. Since DOM structure is a tree, therefore virtual DOM structure is also a tree.

In React, `React.createElement` is used to create a node in virtual DOM tree. `ReactDOM.render` what we call rendering engine, which means it translates virtual DOM to the actual DOM element.

One way to look at it is imagining your UI is a picture:

- `React.createElement` is to generate a pixel in the picture, so everytime you run the function it will create a new picture.
- `ReactDOM.render` will put your picture in the DOM. However, `ReactDOM` doesn't just replace the whole picture (because adding and removing DOM is expensive when there are many elements), instead, `ReactDOM` will spot the difference between the previous picture, mark them, and then only do the changes to fix the difference.

</aside>

## Problem: Extract out the data in BugBook post

Now that we have better understanding of how JSX works, let's render our BugBook post from the following data instead of hardcode them in our JSX.

```json
[
  {
    "id": 1111,
    "author": {
      "src": "https://twitter.com/dog_feelings/status/1130660155966730240",
      "name": "Thoughts of Dog üè≥Ô∏è‚Äçüåà"
    },
    "post": {
      "text": "to be perfectly clear. i love you",
      "image": null
    }
  },
  {
    "id": 1,
    "author": {
      "src": "https://twitter.com/markdalgleish/status/1095424850565378048",
      "name": "Mark Dalgleish"
    },
    "post": {
      "text": "If you're not mocking out Lodash, can you really call it a unit test?",
      "image": null
    }
  },
  {
    "id": 2,
    "author": {
      "src": "https://twitter.com/iamdevloper/status/1081923027644882944",
      "name": "I Am Devloper"
    },
    "post": {
      "text": "when you visit a site you handed over 6 months ago and the client made some changes themselves",
      "image": {
        "src": "/images/picture-after-client.jpg",
        "alt": "Ugly photo"
      }
    }
  }
]
```

<aside>

You can get the data from the Network Tab of your Browser DevTools when opening BugBook.

</aside>

## React component as UI building block

Look at the list of posts, we can actually abstract it away as a `Post` component.

In React, a component is a function that returns React elements (result of `React.createElement` call).

```jsx
function Post() {
  return (
    <article className="card post">
      <div className="card-title">
        <a href="https://twitter.com/dog_feelings/status/1130660155966730240">
          Thoughts of Dog üåà
        </a>
        <button className="focus-btn" type="button">
          ...
        </button>
      </div>
      <div className="card-content">to be perfectly clear. i love you</div>
      <div className="card-actions">
        <button type="button" className="button">
          Like
        </button>
      </div>
    </article>
  );
}

ReactDOM.render(<Post />);
```

But the `Post` component is not really useful because it only can used for the first element in our posts.

To make `Post` component more reusable, we need to allow it to receive input.

### props - input to React component

Remember the signature of `React.createElement`? The first parameter is type, the second parameter is `props`. `props` is the input to React component, which is always an object.

```jsx
function Post(props) {
  return (
    <article className="card post">
      <div className="card-title">
        <a href={props.link}>{props.author}</a>
        <button className="focus-btn" type="button">
          ...
        </button>
      </div>
      <div className="card-content">{props.content}</div>
      <div className="card-actions">
        <button type="button" className="button">
          Like
        </button>
      </div>
    </article>
  );
}

ReactDOM.render(
  <Post
    author="Thoughts of Dog üåà"
    link="https://twitter.com/dog_feelings/status/1130660155966730240"
    content="to be perfectly clear. i love you"
  />
);
```

<aside>

The JSX at the bottom of the previous snippet is equivalent to

```javascript
ReactDOM.render(
  React.createElement(Post, {
    author: 'Thoughts of Dog üåà',
    link: 'https://twitter.com/dog_feelings/status/1130660155966730240',
    content: 'to be perfectly clear. i love you',
  })
);
```

</aside>

With this, we can now reuse `Post` component with different data:

```jsx
function Post(props) {
  return (
    <article className="card post">
      <div className="card-title">
        <a href={props.link}>{props.author}</a>
        <button className="focus-btn" type="button">
          ...
        </button>
      </div>
      <div className="card-content">{props.content}</div>
      <div className="card-actions">
        <button type="button" className="button">
          Like
        </button>
      </div>
    </article>
  );
}

ReactDOM.render(
  <div>
    <Post
      author="Thoughts of Dog üåà"
      link="https://twitter.com/dog_feelings/status/1130660155966730240"
      content="to be perfectly clear. i love you"
    />
    <Post
      author="Mark Dalgleish"
      link="https://twitter.com/markdalgleish/status/1095424850565378048"
      content="If you're not mocking out Lodash, can you really call it a unit test?"
    />
  </div>
);
```

### props can be any data type in JavaScript

If you did some frontend development, you would know that you could do few things on a DOM element:

- set attribute, for instance, `div.setAttribute('class', 'one')`
- set propertyies, for instance, `button.disabled = true`
- add event listener, for instance, `button.addEventListener('click', callback)`

In React, there is only one way to interact with HTML element and your React component, which is props:

```jsx live
<button
  className="btn"
  onClick={() => console.log('I am clicked!')}
  disabled={false}
>
  Click Me
</button>
```

- props can be a primitive like boolean, string, or number
- props can also be other data types in JavaScript such as object, function, because under the hood, props is passed as a object in the `React.createElement` call:

```javascript noWrapper
React.createElement(
  'button',
  // highlight-start
  {
    className: 'btn',
    onClick: () => console.log('I am clicked!'),
    disabled: false,
  },
  // highlight-end
  'Click Me'
);
```

### React is all about creating Component

Taking a step back, the whole feed itself could be think as a React component, while the data is the props to the feed:

```jsx noWrapper
ReactDOM.render(<Feed posts={data} />, document.getElementById('root'));
```

Writing code in React is essentially this process: breaking down your UI to smaller components and build them up.

<section class="exercise">

### Exercise

Let's apply what you learn by implementing pokemon list in [Vanilla Pokemon App][vanilla-pokemon].

![Pokemon List in Vanilla Pokemon App](vanilla-pokemon-list.png)

Note: You only need to show the first 9 pokemon. You do not need to include the "Load More" functionality; it will be covered in coming sections.

</section>

[bugbook]: https://bugbook.netlify.com/
[vanilla-pokemon]: https://vanilla-pokemon.netlify.com/
